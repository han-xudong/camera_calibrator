(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,1583,e=>{e.v("/camera_calibrator/_next/static/media/calibration.worker.1ca8d4ea.ts")},93160,e=>{e.v(e.b(["static/chunks/1e150a4c634f39b5.js","static/chunks/turbopack-cd76eb462a4f717b.js"]))},3954,e=>{"use strict";var r=e.i(43476),t=e.i(71645);let o=(0,t.createContext)(null);e.s(["CalibrationProvider",0,({children:a})=>{let[i,s]=(0,t.useState)(!1),[n,l]=(0,t.useState)(null),c=(0,t.useRef)(null),u=(0,t.useRef)(new Map);(0,t.useEffect)(()=>{let r=new Worker(e.r(93160));c.current=r,r.onmessage=e=>{let{type:r,id:t,payload:o,error:a}=e.data;if("INIT_SUCCESS"===r){console.log("Worker Init Success"),s(!0);let e=u.current.get(t);e&&e.resolve()}else if(a){console.error("Worker Error:",a),"ERROR"===r&&t&&t.startsWith("init_")&&l(a);let e=u.current.get(t);e&&e.reject(Error(a))}else{let e=u.current.get(t);e&&(e.resolve(o),u.current.delete(t))}},r.onerror=e=>{console.error("Worker script error:",e),l("Failed to load worker script.")};let t="init_"+Date.now();u.current.set(t,{resolve:()=>{},reject:e=>l(e.message)}),window.location.origin,window.location.pathname.replace(/\/$/,"");let o=`${window.location.origin}/camera_calibrator/apriltag.js`;return r.postMessage({type:"INIT",id:t,payload:{url:o}}),()=>{r.terminate()}},[]);let d=(e,r)=>new Promise((t,o)=>{if(!c.current)return void o(Error("Worker not initialized"));let a=e+"_"+Date.now()+"_"+Math.random(),i=setTimeout(()=>{u.current.has(a)&&(u.current.delete(a),o(Error(`Worker timed out for ${e}`)))},6e4);u.current.set(a,{resolve:e=>{clearTimeout(i),t(e)},reject:e=>{clearTimeout(i),o(e)}}),c.current.postMessage({type:e,id:a,payload:r})}),m=async(e,r)=>d("DETECT",{imageData:e,settings:r}),h=async(e,r,t)=>d("CALIBRATE",{allImagePoints:e,objPoints:r,imageSize:t});return(0,r.jsx)(o.Provider,{value:{isReady:i,initError:n,detect:m,calibrate:h},children:a})},"useCalibration",0,()=>{let e=(0,t.useContext)(o);if(!e)throw Error("useCalibration must be used within an CalibrationProvider");return e}])},59657,e=>{"use strict";var r=e.i(43476),t=e.i(71645);let o=(0,t.createContext)(void 0);function a({children:e}){let[a,i]=(0,t.useState)("light");return(0,t.useEffect)(()=>{let e=localStorage.getItem("theme");e?i(e):window.matchMedia("(prefers-color-scheme: dark)").matches&&i("dark")},[]),(0,t.useEffect)(()=>{let e=window.document.documentElement;"dark"===a?e.classList.add("dark"):e.classList.remove("dark"),localStorage.setItem("theme",a)},[a]),(0,r.jsx)(o.Provider,{value:{theme:a,toggleTheme:()=>{i(e=>"light"===e?"dark":"light")}},children:e})}function i(){let e=(0,t.useContext)(o);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}e.s(["ThemeProvider",()=>a,"useTheme",()=>i])}]);